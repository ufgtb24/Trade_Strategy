# 文档写作规范

## 设计文档（modules/plans/）

**核心原则**: 用于指导 AI 开发，不是给人类阅读的规范文档。将思路和计划清晰表达，以保证能对后续负责开发的 AI 发挥指导作用。避免形式主义内容。

**内容建议**：
- 模块目标和职责
- 接口定义（类、函数签名）
- 核心算法伪代码
- 数据结构设计
- 依赖关系
- 技术选型理由

**参考**: 不需要参考现有文档

---

## 代码文档（Code Documentation）

**核心原则**: 代码是唯一的真实来源，不再维护独立的总结文档

### 必须遵守

1. **模块级 docstring**：每个模块的 `__init__.py` 必须包含：
   - 模块功能概述
   - 主要类/函数列表
   - 使用示例或参考脚本路径
   - 设计文档链接

2. **类级 docstring**：每个公开类必须包含：
   - 类的用途和职责
   - 核心创新点或设计决策
   - 使用场景说明
   - 关键方法列表

3. **函数级 docstring**：复杂函数必须包含：
   - 功能说明
   - 参数说明（类型和含义）
   - 返回值说明
   - 关键算法步骤（如有）

4. **关键代码注释**：
   - 算法核心逻辑必须有中文注释
   - 重要设计决策必须说明原因
   - 非显而易见的代码必须解释

### 示例

```python
"""
技术分析模块 (Module 02)

核心功能：
- 增量式突破检测
- 多峰值识别
- 质量评分系统

主要类：
- BreakoutDetector: 核心检测器
- FeatureCalculator: 特征计算
- QualityScorer: 质量评分

使用示例：scripts/visual_demo.py
设计文档：docs/modules/plans/02_技术分析模块设计.md
"""

class BreakoutDetector:
    """
    增量式突破检测器

    核心创新：
    1. 峰值共存策略：3%阈值内的峰值不会互相覆盖
    2. 多峰值突破：一次突破可能同时突破1-5个峰值
    3. O(1)增量更新：适合实时监控

    使用场景：
    - 回测：use_cache=False, batch_add_bars()
    - 实时监控：use_cache=True, add_bar()
    """
```

---

**规范版本**: v3.0（代码即文档）
**更新日期**: 2025-11-28
