# 突破选股策略文档

## 一、策略概述

### 1.1 策略目标
在美股市场中，找到已经形成突破的股票，在适当时机买入，并对买入后的股票进行持续管理，以获取短期收益。

### 1.2 适用市场
本策略专门针对美国股票市场设计，充分考虑美股的交易规则和市场特性。

### 1.3 核心理念
- 股票突破历史阻力位（凸点）后，具有继续上涨的动能
- 高质量的突破具有更大的历史意义，后续上涨概率更高
- 突破后股价通常不会直接起飞，而是会留下日间买入机会窗口

### 1.4 操作流程
**搜索** → **监测** → **交易** → **持仓管理**

## 二、核心概念定义

### 2.1 突破走势
突破走势 = **凸点** + **突破点**

### 2.2 凸点（阻力位）

#### 2.2.1 凸点分类
1. **普通凸点**：股价高于两侧一定时段内的高点（主要看最高价）
2. **特殊意义点**：不一定高于两侧，但具有历史意义
   - 例如：导致跌入谷底的大跌K线的最高价

#### 2.2.2 凸点质量评估因素
- **放量**：成交量明显放大（超过平均成交量的 `VOLUME_SURGE_MULTIPLIER` 倍）
- **长K线**：K线实体或影线较长（涨跌幅超过 `LONG_CANDLE_THRESHOLD_PCT`%）
- **压制时间长**：对两侧股价的压制时间较长（包括距离突破点较远）
- **同价多凸点**：同一价位附近出现多个凸点（价格差异在 `PEAK_MERGE_THRESHOLD_PCT`% 以内的凸点视为同一阻力区域）
- **相对高度**：高于相邻价位的程度
- **附近凸点合并**：相近价位的多个凸点合并为一个更强的阻力区域

### 2.3 突破点

#### 2.3.1 突破确认标准
**突破点的最高价（High） > 凸点的最高价（High）**

#### 2.3.2 突破点分类
- **阳线突破**：以阳线形式突破凸点
- **阴线突破**：以阴线形式突破凸点
- **上影线突破**：仅上影线触及或超过凸点

#### 2.3.3 突破质量评估因素
- **大涨幅**：突破当日涨幅较大
- **跳空**：跳空高开突破
- **放量**：成交量明显放大
- **连续性**：连续多日上涨（表明处于成熟涨势中）
- **稳定性**：突破后的稳定程度（避免假突破或仅为吸筹）

## 三、搜索系统

### 3.1 搜索目标
已经完成突破但还未大幅上涨的股票，包括：
- 当前交易日刚刚完成突破的股票
- 过去 `HISTORICAL_SEARCH_DAYS` 天内（默认：7天）完成突破的股票

### 3.2 搜索方法
[待确定：可能同时搜索突破点和凸点]

### 3.3 突破质量评估
突破走势的质量由其**历史意义**决定，高质量的突破会增加后续看涨的置信度。

## 四、监测系统

### 4.1 观察池设置

#### 4.1.1 分钟行情实时观察池
- **用途**：监测当日突破的股票，防止突破后直接上涨错失机会
- **加入条件**：当日完成突破的股票
- **观察期限**：`REALTIME_OBSERVATION_DAYS` (默认：1个交易日)
- **买入条件**：股价超过突破日K线实体上沿 `REALTIME_BUY_THRESHOLD_PCT`%
- **退出条件**：
  - 触发买入
  - 超时（转入日K观察池）

#### 4.1.2 日K行情非实时观察池
- **用途**：监测突破后回落的股票，等待企稳走强
- **加入条件**：
  - 搜索到的过去 `HISTORICAL_SEARCH_DAYS` 天内突破并回落的股票
  - 实时观察池超时转入的股票
  - 买入后止盈止损的股票
- **观察期限**：`DAILY_OBSERVATION_DAYS` (默认：30天)
- **买入条件**：企稳并出现走强信号
- **退出条件**：
  - 触发买入
  - 观察期满

### 4.2 监测重点
- 这是本策略的**主流交易方法**
- 基于大量观察：股票突破后通常不会直接起飞，而是留下买入机会窗口

## 五、交易执行

### 5.1 买入策略

#### 5.1.1 实时买入（进阶方法）
- **适用对象**：实时观察池中的股票
- **买入时机**：股价超过突破日K线实体上沿 `REALTIME_BUY_THRESHOLD_PCT`%
- **执行方式**：盘中实时监控，立即执行

#### 5.1.2 日K买入（主流方法）
- **适用对象**：日K观察池中的股票
- **买入时机**：企稳后出现走强信号
- **执行方式**：基于日K线判断，不需要分钟行情

### 5.2 持仓管理

#### 5.2.1 止盈策略
- 跟踪止盈：[待补充具体规则]
- 目标止盈：[待补充具体规则]

#### 5.2.2 止损策略
- 固定止损：[待补充具体规则]
- 移动止损：[待补充具体规则]

## 六、循环跟踪机制

### 6.1 止盈止损后的处理
- 将股票重新加入日K观察池
- 作为**加强观察目标**，提高关注度
- 理念：有意义的突破最终会迎来大涨，可能需要几轮波动

### 6.2 突破的累积效应
- 之前的突破作为**正向特征**
- 与新的看涨信号互相佐证
- 增加后续操作的置信度
- 典型场景：股价再次突破新形成的凸点

### 6.3 策略选择
- **方案一**：持续跟踪同一突破，直到大涨
- **方案二**：每次波动视为独立突破，重新执行完整流程
- [需要进一步分析哪种方案更有效]



## 七、待完善内容

1. **量化参数**
   - 突破判定的具体标准
   - 买入触发的具体比例
   - 止盈止损的具体数值
   - 时间窗口参数

2. **搜索算法**
   - 凸点识别算法
   - 突破识别算法
   - 质量评分系统

3. **风险管理**
   - 仓位管理规则
   - 最大持仓数量
   - 单只股票最大仓位

4. **回测验证**
   - 历史数据回测
   - 参数优化
   - 策略有效性验证

## 九、开发工具说明

### 9.1 实盘交易
- **API选择**：Tiger Open API
- **优势**：
  - 支持美股实时行情数据
  - 提供完整的交易接口（下单、撤单、查询等）
  - 支持盘前盘后交易
  - 有Python SDK，便于策略开发
  - 提供WebSocket推送，支持实时监控

### 9.2 回测系统
#### 9.2.1 Tiger Open API
- **适用场景**：需要高质量历史数据的精确回测
- **优势**：
  - 数据质量高，包含完整的美股历史数据
  - 与实盘使用同一API，减少回测与实盘差异
  - 支持分钟级别和日级别数据
  
#### 9.2.2 Backtrader
- **适用场景**：需要复杂策略逻辑和灵活回测框架
- **优势**：
  - 功能强大的回测框架
  - 支持多种技术指标
  - 内置性能分析工具
  - 可视化功能完善
  - 支持参数优化

### 9.3 开发环境建议
- **编程语言**：Python 3.8+
- **核心库**：
  - `tigeropen`：Tiger Open API的Python SDK
  - `backtrader`：回测框架
  - `pandas`：数据处理
  - `numpy`：数值计算
  - `matplotlib`/`plotly`：可视化
  
### 9.4 数据管理
- **历史数据存储**：使用本地数据库（如SQLite或PostgreSQL）缓存历史数据
- **实时数据**：通过Tiger Open API的WebSocket获取
- **数据同步**：定期更新本地历史数据，确保回测准确性

### 9.5 实施步骤
1. **环境搭建**：
   - 申请Tiger Trade账号和API权限
   - 安装必要的Python库
   - 配置API密钥和环境
   
2. **数据准备**：
   - 使用Tiger Open API下载历史数据
   - 建立本地数据缓存机制
   
3. **策略开发**：
   - 实现凸点识别算法
   - 实现突破检测逻辑
   - 开发观察池管理系统
   
4. **回测验证**：
   - 使用Backtrader进行初步回测
   - 使用Tiger Open API数据进行精确回测
   - 参数优化和策略调整
   
5. **实盘部署**：
   - 小资金测试
   - 监控系统搭建
   - 风险管理完善

## 十、实施建议

1. **第一阶段**：完善概念定义和量化标准
2. **第二阶段**：开发搜索和监测系统
3. **第三阶段**：小资金实盘测试
4. **第四阶段**：根据测试结果优化参数
5. **第五阶段**：逐步扩大资金规模

---

*备注：本文档基于初步策略设计，将使用Tiger Open API进行实盘交易，并通过Tiger Open API或Backtrader进行历史数据回测来不断完善。*